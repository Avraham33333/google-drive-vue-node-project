# Google Drive Vue Node Project

This project is a full-stack web application that integrates:

- **Google OAuth & Google Drive API:** For authenticating users and fetching file data (with pagination and CRUD operations).
- **OpenAI API:** For answering natural language questions about your data.
- **Vue.js Frontend:** A simple UI for listing files and asking questions.

---

## Features

- **OAuth Integration:** Securely log in using Google.
- **File Management:** List, paginate, and perform CRUD operations on Google Drive files (excluding folders).
- **AI Question Interface:** Ask questions (e.g., “Which file was modified most recently?”) and receive responses generated by OpenAI.
- **Single Command Launch (Development):** Uses [concurrently](https://www.npmjs.com/package/concurrently) to run both backend and frontend with one command.

---

## Prerequisites

1. **Node.js** (v14 or later recommended)  
2. **npm**  
3. A **Google Cloud project** with OAuth credentials for Google Drive (and Gmail if needed)  
4. An **OpenAI account** with an API key  

---

## Project Structure

```
google-drive-vue-node-project/
├── backend/
│   ├── app.js            # Main backend file (Node.js with Express)
│   ├── .env              # Environment variables (not committed; see .env.example)
│   └── package.json      # Backend dependencies and scripts
├── frontend/
│   ├── src/
│   │   ├── App.vue
│   │   └── components/
│   │       ├── FileList.vue
│   │       └── AskQuestion.vue
│   ├── package.json      # Frontend dependencies and scripts
│   └── ...
├── .env.example          # Sample file for environment variables
├── package.json          # Root package.json (includes concurrently scripts)
└── README.md             # This file
```

---

## 1. Clone the Repository

```bash
git clone https://github.com/Avraham33333/google-drive-vue-node-project.git
cd google-drive-vue-node-project
```

---

## 2. Set Up Environment Variables

### For the Backend

1. Navigate to the `backend` folder:
   ```bash
   cd backend
   ```
2. Copy the sample `.env` file:
   ```bash
   cp .env.example .env
   ```
3. Open `.env` and replace the placeholder values with your actual credentials:
   ```ini
   PORT=3000

   # Google OAuth Credentials
   GOOGLE_CLIENT_ID=your_google_client_id_here
   GOOGLE_CLIENT_SECRET=your_google_client_secret_here
   REDIRECT_URI=http://localhost:3000/oauth2callback

   # OpenAI API Key
   OPENAI_API_KEY=your_openai_api_key_here
   ```
4. **Important:** Do not commit your `.env` file. Use `.env.example` to indicate required variables.

### For the Frontend

- Typically, the frontend will call the backend, so it may not require an API key directly.
- If you need environment variables for the front end, configure them similarly (e.g., a `.env` file in `frontend/`, plus a `.env.production` or `.env.development` for Vue if needed).

---

## 3. Install Dependencies

From the **project root** (where the main `package.json` with concurrently is located), install dependencies in **both** the backend and frontend:

```bash
cd backend
npm install

cd ../frontend
npm install

cd ..
```

(You can also install from each folder separately if you prefer.)

---

## 4. Running the Application (Development)

In the **project root**, run:

```bash
npm start
```

This uses **concurrently** (defined in the root `package.json`) to:
- **Launch the backend** on port `3000` (Node/Express in `backend/app.js`)
- **Launch the frontend** on port `8080` (Vue.js)

When both servers start successfully, you’ll see messages like:

```
[0] Server running on port 3000
[1]  App running at:
[1]  - Local:   http://localhost:8080/
...
```

### Authentication

1. Visit [http://localhost:3000/google-auth](http://localhost:3000/google-auth) to start the Google OAuth flow.
2. Sign in with your Google account and grant access.
3. After successful authentication, you’ll be redirected to [http://localhost:8080/](http://localhost:8080/) (assuming you updated `app.js` to do so).
4. The backend now has valid OAuth tokens to access your Drive files.

---

## 5. Testing the Application

### 5.1 Google Drive Files

- **List Files:**  
  In your browser, go to [http://localhost:8080/](http://localhost:8080/).  
  You should see the **Files from Google Drive** section. If you see a “Filter” button, you can optionally set start/end dates to filter by modified time.  
  Only actual files (no folders) are displayed, showing:
  - File Name (with ID)
  - Owner(s)
  - Last Modified (in `dd/mm/yyyy ; HH:mm` format)
  - Size (bytes)

- **Rename or Delete a File:**  
  In the UI, enter a new name in the input field next to a file, then click **Rename**. To delete, click **Delete**.  
  The UI will call your backend’s endpoints:
  - `PUT /files/:id` to rename
  - `DELETE /files/:id` to delete

### 5.2 Ask a Question (OpenAI)

- **Ask a Question:**  
  In the **Ask a Question** section, type something like “Which file is the largest?” or “Which file was last modified?” and click **Submit**.  
  - The backend will fetch file metadata from Google Drive (excluding folders), build a prompt, and call OpenAI’s GPT-4 (or GPT-3.5-turbo if you changed the model).  
  - The AI’s answer is displayed under “Answer:”.

### 5.3 cURL or Postman Testing

- **List Files (GET /files):**  
  ```bash
  curl http://localhost:3000/files
  ```
- **Rename a File (PUT /files/:id):**  
  ```bash
  curl -X PUT "http://localhost:3000/files/<FILE_ID>" \
       -H "Content-Type: application/json" \
       -d '{"name": "NewFileName.docx"}'
  ```
- **Delete a File (DELETE /files/:id):**  
  ```bash
  curl -X DELETE "http://localhost:3000/files/<FILE_ID>"
  ```
- **Ask a Question (POST /ask):**  
  ```bash
  curl -X POST "http://localhost:3000/ask" \
       -H "Content-Type: application/json" \
       -d "{\"question\": \"Which file is the largest?\"}"
  ```

---

## 6. Production Build (Optional)

To serve the Vue app from the same Express server in production:

1. **Build** the front end:
   ```bash
   cd frontend
   npm run build
   ```
   This creates a `dist` folder with static assets.

2. **Serve Dist Folder** from `app.js`:
   ```js
   import path from 'path';
   import { fileURLToPath } from 'url';

   const __filename = fileURLToPath(import.meta.url);
   const __dirname = path.dirname(__filename);

   app.use(express.static(path.join(__dirname, '../frontend/dist')));
   app.get('*', (req, res) => {
     res.sendFile(path.join(__dirname, '../frontend/dist', 'index.html'));
   });
   ```
3. **Deploy** your Node server (e.g., on Heroku, AWS, or any Node hosting). The server will serve both the API and the built front end from one place.

---

## Additional Notes

- **Security:**  
  - Do not commit your `.env` file.  
  - If your API keys or OAuth credentials are ever exposed, rotate them immediately.
- **Billing and Usage:**  
  - Monitor your OpenAI usage and Google Cloud usage to avoid unexpected charges.
- **Extensibility:**  
  - You can expand the front end for more advanced file filters, or add additional AI prompt logic.

---

## License

This project is licensed under the MIT License.
