# Google Drive Vue Node Project

This project is a full-stack web application that integrates:
- **Google OAuth & Google Drive API:** For authenticating users and fetching file data (with pagination and CRUD operations).
- **OpenAI API:** For answering natural language questions about your data.
- **Vue.js Frontend:** A simple UI for listing files and asking questions.

## Features

- **OAuth Integration:** Securely log in using Google.
- **File Management:** List, paginate, and perform CRUD operations on Google Drive files.
- **AI Question Interface:** Ask questions (e.g., “Which file was modified most recently?”) and receive responses generated by OpenAI.
- **Separate Backend & Frontend:** A Node.js backend and a Vue.js frontend.

## Prerequisites

- Node.js (v14 or later recommended)
- npm
- A Google Cloud project with OAuth credentials for Google Drive (and Gmail if needed)
- An OpenAI account with an API key

## Project Structure

```plaintext
google-drive-vue-node-project/
├── backend/
│   ├── app.js            # Main backend file (Node.js with Express)
│   ├── .env              # Environment variables (not committed; see .env.example)
│   └── package.json      # Backend dependencies and scripts
├── frontend/
│   ├── src/
│   │   ├── App.vue
│   │   └── components/
│   │       ├── FileList.vue
│   │       └── AskQuestion.vue
│   ├── package.json      # Frontend dependencies and scripts
│   └── ...
├── .env.example          # Sample file for environment variables
└── README.md             # This file
```

## 1. Clone the Repository

Clone the project from GitHub and navigate into the project directory:

```bash
git clone https://github.com/Avraham33333/google-drive-vue-node-project.git
cd google-drive-vue-node-project
```

## 2. Set Up Environment Variables

### For the Backend

#### Step 1: Navigate to the backend folder

```bash
cd backend
```

#### Step 2: Copy the sample `.env` file

```bash
cp .env.example .env
```

#### Step 3: Open the `.env` file and replace the placeholder values with your actual credentials

```ini
PORT=3000

# Google OAuth Credentials
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
REDIRECT_URI=http://localhost:3000/oauth2callback

# OpenAI API Key
OPENAI_API_KEY=your_openai_api_key_here
```

> **Important:** Do not commit your `.env` file. Use `.env.example` to indicate required variables.

### For the Frontend

- If the frontend requires any environment variables, configure them similarly.  
- Typically, the frontend will call the backend, so it **may not require an API key directly**.

## 3. Install Dependencies

### For the Backend

From the `backend` folder, run:

```bash
npm install
```

### For the Frontend

From the `frontend` folder, run:

```bash
npm install
```

## 4. Run the Application

### Start the Backend Server

In the `backend` folder, run:

```bash
node app.js
```

You should see output indicating that the server is running (e.g., "Server running on port 3000").

### Start the Frontend Server

In the `frontend` folder, run:

```bash
npm run serve
```

This will serve the Vue.js app (commonly at [http://localhost:8080](http://localhost:8080)).

###### 5. Testing Your Application

##### Google Authentication

- **Visit:** [http://localhost:3000/google-auth](http://localhost:3000/google-auth)  
- **Action:** This initiates the Google OAuth flow. Sign in with your Google account.  
- **Note:** In testing mode, only test users (as specified in your Google Cloud OAuth consent screen) can successfully authenticate.

##### File Management Endpoints (Google Drive)

- **List Files:**  
  Visit [http://localhost:3000/files](http://localhost:3000/files)  
  (Optional query parameters: `?pageSize=10`, `?startDate=YYYY-MM-DD`, `?endDate=YYYY-MM-DD`)

- **Get Single File:**  
  Visit [http://localhost:3000/files/<FILE_ID>](http://localhost:3000/files/<FILE_ID>)  
  Replace `<FILE_ID>` with an actual file ID from your Drive.

- **Rename a File:**  
  Use a REST client (e.g., Postman) or cURL to send a PUT request:

  ```bash
  curl -X PUT "http://localhost:3000/files/<FILE_ID>" \
       -H "Content-Type: application/json" \
       -d '{"name": "NewFileName.docx"}'
  ```

- **Delete a File:**  
  Use a REST client or cURL to send a DELETE request:

  ```bash
  curl -X DELETE "http://localhost:3000/files/<FILE_ID>"
  ```

##### AI Question Endpoint (OpenAI)

- **Endpoint:** `POST /ask`
- **Using cURL:**

  ```bash
  curl -X POST "http://localhost:3000/ask" \
       -H "Content-Type: application/json" \
       -d "{\"question\": \"Which file was modified most recently?\"}"
  ```

- **Using Postman:**
  - Set the method to `POST` and URL to `http://localhost:3000/ask`
  - Under Headers, set `Content-Type` to `application/json`
  - In the Body (raw, JSON), enter:

    ```json
    {
      "question": "Which file was modified most recently?"
    }
    ```

  - Send the request and observe the JSON response containing the AI's answer.

## 6. Additional Notes

- **Security:**  
  Do not commit your `.env` file to version control. Use `.env.example` to show required variables.

- **Git Commit History:**  
  Commit changes incrementally with descriptive messages to track development progress.

- **API Usage & Billing:**  
  Monitor your OpenAI API usage and billing details to avoid unexpected charges. If your free credits are exhausted, you'll need to set up billing.

- **Google Cloud Setup for Multiple Users:**  
  If you plan to share this project, each user must set up their own Google Cloud project with OAuth credentials and update the environment variables accordingly.

## Running the Solution

1. **Backend:**  
   Run `node app.js` from the `backend` folder.

2. **Frontend:**  
   Run `npm run serve` from the `frontend` folder.

3. **Testing:**  
   Use your browser, cURL, or Postman to interact with endpoints:
   - [http://localhost:3000/google-auth](http://localhost:3000/google-auth) for Google authentication.
   - [http://localhost:3000/files](http://localhost:3000/files) for listing files.
   - [http://localhost:3000/ask](http://localhost:3000/ask) for asking questions.

## License

This project is licensed under the MIT License.
